<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>Coseis</title>
<style type="text/css">

/* CSS stylesheet */

body {
    max-width: 760px;
    padding: 0px;
    margin: 0px auto;
    background-color: #eee;
    color: #000;
    font-family: 'Lucida Grande', Geneva, Verdana, sans-serif;
    position: relative;
    line-height: 140%;
}

div.document {
    background-color: #fff;
    padding: 0px 60px;
    border: 1px solid #ccc;
}

img {
    border: none;
    margin: 10px 0px;
}

img.plot {
    margin: 0px -30px;
}

img.align-left, .figure.align-left {
    clear: left;
    float: left;
    margin-right: 1em
}

img.align-right, .figure.align-right {
    clear: right;
    float: right;
    margin-left: 1em
}

img.align-center, .figure.align-center {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

hr {
    border: none;
    border-top: 2px solid #ccc;
}

pre {
    padding: 10px;
    border: 1px solid #ccc;
    background-color: #eee;
    line-height: 100%;
}

a {
    color: #06a;
    text-decoration: none;
}

a:hover, a:active {
    text-decoration: underline;
}

.section li {
    padding: 5px;
}

h1, h1 a, h1 a:hover, h1 a:active {
    color: #900;
    text-decoration: none;
    font-weight: bold;
    margin-bottom: 5px;
}

h2.subtitle {
    font-size: large;
    font-weight: normal;
    margin-top: 5px;
}

h3 {
    border-top: 2px solid #ccc;
    padding-top: 10px;
}

form.search {
    margin-left: 30px;
}

ul.navbar {
    list-style-type: none;
    padding: 0px;
}

.navbar li {
    display: inline;
}

.navbar a {
    background-color: #eee;
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: none;
}

.navbar a:hover, a:active {
    background-color: #ccc;
}

div.box {
    border: 1px solid #aaa;
    margin: 30px 0px;
}

div.box form, div.box p, div.box ul, div.box h4 {
    margin: 15px 30px;
}

div.box h3 {
    background-color: #ccc;
    padding: 4px 30px;
    margin: 0px;
    margin-bottom: 15px;
    font-size: medium;
}

p.topic-title {
    font-size: large;
    font-weight: bold;
}

p.warning {
    padding: 10px;
    border: 1px solid #ccc;
    background-color: #ffd;
}

table {
    width:100%;
    border-collapse: collapse;
    border: 1px solid #aaa;
    margin: 30px 0px;
}

th {
    padding: 4px 30px;
    background-color: #ccc;
    border: none;
    text-align: left;
}

td {
    padding: 4px 30px;
    border: none;
    border-top: 1px solid #eee;
}


</style>
</head>
<body>
<div class="document" id="coseis">
<h1 class="title">Coseis</h1>
<h2 class="subtitle" id="computational-seismology-tools">Computational Seismology Tools</h2>

<ul class="navbar simple">
<li><a class="reference internal" href="#install">Install</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference external" href="sord.html">SORD</a></li>
<li><a class="reference external" href="http://scec.usc.edu/websims">WebSims</a></li>
<li><a class="reference external" href="http://github.com/gely/coseis/">Source Code</a></li>
</ul>
<div class="section" id="summary">
<h3>Summary</h3>
<p>Coseis is an open-source toolkit for earthquake simulation featuring:</p>
<ul class="simple">
<li>The Support Operator Rupture Dynamics (<a class="reference external" href="sord.html">SORD</a>) code for modeling spontaneous
rupture and 3D wave propagation.</li>
<li>SCEC Community Velocity Models (CVM) codes, with MPI parallelization for
<a class="reference external" href="http://www.data.scec.org/3Dvelocity/">version 4</a>, and new <a class="reference external" href="http://earth.usc.edu/~gely/cvmh/">geotechnical layer implementation</a> for the
<a class="reference external" href="http://structure.harvard.edu/cvm-h/">Harvard version</a>.</li>
<li><a class="reference external" href="http://scec.usc.edu/websims">WebSims</a> web application for cataloging, exploring, and disseminating large
numerical simulations data sets.</li>
<li>Utilities for mesh generation, coordinate projection, and visualization.</li>
</ul>
<p>The primary interface is through a Python module which (for high-performance
components) wraps Fortran parallelized with MPI.</p>
<p>Coseis is written by <a class="reference external" href="http://earth.usc.edu/~gely/">Geoffrey Ely</a> with contributions from Steven Day,
Bernard Minster, Feng Wang, Zheqiang Shi, and Jun Zhou.  It is licensed under
<a class="reference external" href="http://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a>.</p>
<p class="warning"><strong>WARNING</strong>: Coseis is a research code under active development.  Changes
are frequent and it has known bugs!</p>
</div>
<div class="section" id="system-requirements">
<h3>System requirements</h3>
<ul class="simple">
<li><a class="reference external" href="http://www.python.org/">Python</a>, and <a class="reference external" href="http://numpy.scipy.org/">NumPy</a> (Numerical Python).</li>
<li>(+) Fortran 95 compiler.  Required only for SORD and CVM4 modules.</li>
<li>(+) Message Passing Interface (MPI) library.  Required only for
multiprocessing with SORD and CVM4.</li>
<li>(+) <a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a>, <a class="reference external" href="http://www.scipy.org/">SciPy</a>, and Pyproj Python packages.  Required only for
supplemental plotting, signal processing, and mesh generation utilities.</li>
<li>(+) <a class="reference external" href="http://git-scm.com/">Git</a> version control system.  Useful for development and staying updated
with the latest code version.</li>
</ul>
<p>(+) Optional</p>
</div>
<div class="section" id="install">
<h3>Install</h3>
<p>Fortran and MPI installation should only be necessary for personal computers.
HPC systems generally supply specifically tuned Fortran compilers and MPI
libraries.</p>
<ol class="arabic">
<li><p class="first">GNU Fortran is recommended if you don't already have a Fortran 95 compiler.</p>
<p>Fedora/Red Hat Linux:</p>
<pre class="literal-block">
sudo yum install gfortran
</pre>
<p>Ubuntu Linux:</p>
<pre class="literal-block">
sudo apt-get install gfortran
</pre>
<p>Mac OS X:</p>
</li>
</ol>
<p>GNU Fortran versions from MacPorts and Fink are not recommended.  Instead,
download the latest gfortran package in the <em>Apple Xcode gcc-42 add-ons</em>
section of the <a class="reference external" href="http://r.research.att.com/tools/">R for Mac OS X</a> Developer's Page along with and the
corresponding version of <a class="reference external" href="http://developer.apple.com/technology/xcode.html">Xcode</a> (either iPhone or Mac-only) available from
<a class="reference external" href="http://connect.apple.com/">Apple Developer</a> Connection (free membership required).  Install Xcode fir</p>
<ol class="arabic" start="2">
<li><p class="first"><a class="reference external" href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH2</a> is recommended if you need MPI.  The included script
<a class="reference external" href="../util/install-mpich.sh">install-mpich.sh</a> can install MPICH2 for you.</p>
</li>
<li><p class="first">It is recommended that you install a private copy of Python for Coseis.
The included script <a class="reference external" href="../util/install-python.sh">install-python.sh</a> can install Python and NumPy for you.
Enthought Python Distribution (<a class="reference external" href="http://www.enthought.com/products/epddownload.php">EPD</a>) is another option that includes many
bells and whistles such as the <a class="reference external" href="http://code.enthought.com/projects/mayavi/">Mayavi</a> visualization package.</p>
</li>
<li><p class="first">Download the source code.  The best option is to use the <a class="reference external" href="http://github.com/gely/coseis">Coseis GitHub
repository</a> with <a class="reference external" href="http://git-scm.com/">Git</a> version control, which
facilitates applying code updates, and merging local modifications:</p>
<pre class="literal-block">
git clone git://github.com/gely/coseis.git
</pre>
<p>Update to the latest changes anytime with:</p>
<pre class="literal-block">
git pull
</pre>
<p>Alternatively, download and unpack the source tar archive:</p>
<pre class="literal-block">
curl http://earth.usc.edu/~gely/coseis/download/coseis.tgz | tar zx
</pre>
</li>
<li><p class="first">For laptop and workstation installations, the default system configuration
is usually be adequate.  To test the default configuration:</p>
<pre class="literal-block">
cd coseis/
python setup.py
</pre>
<p>Systems with batch schedulers (such as PBS or LoadLeveler) generally require
custom configuration to specify system resources, compiler options, and
scheduler scripts.  If Coseis has already been configured for your system you
can use one of the included configurations.  For example, for the TeraGrid
Ranger system at TACC:</p>
<pre class="literal-block">
python setup.py --machine=tacc-ranger
</pre>
<p>To see the list of included configurations look in the <tt class="docutils literal">cst/conf/</tt> directory.
Each custom configuration is located in a separate sub-directory.  To create a
new custom configuration, make a new sub-directory following the example of
the supplied configurations.</p>
</li>
<li><p class="first">Compile component codes:</p>
<pre class="literal-block">
python setup.py build
</pre>
</li>
<li><p class="first">Configure the Python path:</p>
<pre class="literal-block">
python setup.py path
</pre>
</li>
<li><p class="first">Steps 5 through 7 can be combined as:</p>
<pre class="literal-block">
python setup.py --machine=tacc-ranger build path
</pre>
</li>
</ol>
</div>
<div class="section" id="examples">
<h3>Examples</h3>
<div class="section" id="cvm-depth-planes">
<h4>CVM depth planes</h4>
<img alt="../scripts/cvm/cvm4-vs500.png" src="../scripts/cvm/cvm4-vs500.png" />
<img alt="../scripts/cvm/cvmh-vs500.png" src="../scripts/cvm/cvmh-vs500.png" />
<p>Extract S-wave velocity at 500 meters depth. Plot using Matplotlib</p>
<pre class="literal-block">
cd scripts/cvm
python plane.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/cvm/plane.py">plane.py</a></p>
</div>
<div class="section" id="cvm-fence-diagram">
<h4>CVM fence diagram</h4>
<img alt="../scripts/cvm/cvm4-vp-fence.png" src="../scripts/cvm/cvm4-vp-fence.png" />
<p>Build a fence diagram similar to Magistrale (2000) figure 10. Plot using
Mayavi:</p>
<pre class="literal-block">
cd scripts/cvm
python fence.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/cvm/fence.py">fence.py</a></p>
</div>
<div class="section" id="cvm-4-basin-depth">
<h4>CVM-4 Basin depth</h4>
<img alt="../scripts/basindepth/cvm4-z25.png" src="../scripts/basindepth/cvm4-z25.png" />
<p>Extract 3D mesh and search for the shallowest surface of Vs = 2.5 km/s.
Plot over topography using Mayavi:</p>
<pre class="literal-block">
cd scripts/basindepth
python mesh.py
python search.py
python viz.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/basindepth/mesh.py">mesh.py</a>
<a class="reference external" href="../scripts/basindepth/search.py">search.py</a>
<a class="reference external" href="../scripts/basindepth/viz.py">viz.py</a></p>
</div>
</div>
</div>
</body>
</html>
